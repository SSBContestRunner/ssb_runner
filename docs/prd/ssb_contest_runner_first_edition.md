# SSB Contest Runner 第一版

参考 Morese Runner 实现最基础的功能

## 需求要点

- 显示当前比赛记录的所有通联信息
  - 记录的呼号
  - RST
  - Exchange
  - 正确情况

- 显示当前比赛模拟运行的时间

- 显示当前比赛模拟的通联统计
  - Raw
    - 通联数量
    - 系数数量
    - 获得的分数
  - Verified
    - 通联数量
    - 系数数量
    - 获得的分数

- 显示当前的 QSO 速度
  - 单位为 QSO/小时

- 基础配置
  - 配置主叫呼号
  - 配置语音播放的速度（按照等级配置，配置越高的速度越快）
  - 配置一次比赛的总时长（分钟）
  - 目前仅支持 CQ WPX，后续再增加支持的比赛种类

- 比赛控制
  - 开始比赛
  - 结束比赛

- 通联记录
  - 输入呼号
  - 输入 RST（自动输入 59）
  - 输入 Exchange
  - 快捷键
    - 参考 N1MM+，F1-F8 分别对应不同功能

- 窗口大小
  - 窗口大小固定为 1280x720 dp

## 比赛流程

![比赛流程状态机](https://github.com/user-attachments/assets/c43f8fdc-fb66-4ef2-8dde-17385545a607)

超时时间定为 10s

F1-F8 按键除了状态流转外，都需要执行对应的语音播放功能

### 不涉及状态流转的按键指令

- 空格键：键盘光标在 CALL 和 Exchange 输入框之间跳转
- Tab 键：键盘光标跳转到下一个输入框
- Shift+Tab 键：键盘光标跳转到上一个输入框
- 分号按键：播放 F5+F2 的语音


## 界面原型

![界面原型](https://github.com/user-attachments/assets/eb906032-c1f8-464c-a883-cdda02f58c9b)

## 交互要点

### 显示当前比赛记录的所有通联信息

通联记录显示区域包括 Call、RST、Exchange

- 以比赛开始的时间为 UTC 00:00:00
- 通联记录完全正确时，用黑色显示，Corrections 区域为空
- 当通联记录有错误部分时，对应错误部分用红色显示，Corrections 区域显示对应正确的信息
- Corrections 区域显示顺序为
  1. Call
  2. RST
  3. Exchange

### 显示当前比赛模拟运行的时间

当前比赛模拟运行的时间使用 `HH:MM:SS` 显示

### 显示当前比赛模拟的通联统计

根据不同的比赛规则，计算以下内容：

- 通联数量
- 系数个数
- 分数统计

通联统计分为 Raw 和 Verified 两部分

Raw 不考虑用户通联记录的正确情况，按照用户的通联记录全部都是正确的进行上述内容的计算

Verified 则严格按照比赛的规则进行上述部分内容的计算

### 基础配置

- 配置主叫呼号
  - 主叫呼号输入框仅能输入呼号相关的内容

- 配置语音播放的速度（按照等级配置，配置越高的速度越快）
  - 可以做成一个下拉选择框

- 配置一次比赛的总时长（分钟）
  - 输入框，只能输入数字

- 配置语音播放模式
  - 下拉选择框，本版本禁用
  - 目前仅支持 Single Call，即单呼号模式

- 配置当前需要模拟的比赛
  - 下拉选择框，本版本禁用
  - 目前仅支持 CQ WPX，后续再增加支持的比赛种类

### 比赛控制

- 开始比赛
  - 点击 `RUN` 按钮开始比赛
  - 此时 `RUN` 按钮变成 `STOP`

- 结束比赛
  - 点击 `STOP` 按钮结束比赛
  - 此时 `STOP` 按钮变成 `RUN`

- 比赛时间到自动结束
  - 当比赛时间到时，自动结束比赛

### 通联记录

- 输入呼号
  - 呼号输入框只能输入呼号相关的内容

```
呼号相关的内容包括以下部分：[字母、数字、/]
其中，字母要自动转为大写
```

- 输入 RST（自动输入 59）
  - 由于是 SSB，只能输入两位数字

- 输入 Exchange
  - 根据不同的比赛，对 Exchange 的可输入内容进行限制
  - 目前仅支持 CQ WPX，仅支持输入数字

- 快捷键
  - 参考 N1MM+，F1-F8 分别对应不同功能
  - 可以通过鼠标点击触发功能，也可以按 F1-F8 键触发功能

### 窗口大小

- 目前电脑端窗口大小固定为 1280x720 px
- 不允许改变窗口大小

### QSO 速度

按照最近 5 个的 QSO 的平均速度计算为当前 QSO 速度

如果总 QSO 数量不足 5 个，则按照总 QSO 的平均速度计算为当前的 QSO 速度

```
平均速度 = QSO 花费的总时间 / QSO 的个数，单位为 QSO个数/分

显示速度 = 平均速度 * 60
```